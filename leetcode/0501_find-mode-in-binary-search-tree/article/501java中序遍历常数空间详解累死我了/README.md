"+++
title = "0501. Find Mode in Binary Search Tree 501.javaä¸­åºéå†å¸¸æ•°ç©ºé—´è¯¦è§£ï¼ˆç´¯æ­»æˆ‘äº†ï¼‰ "
author = ["ustcyyw"]
date = 2020-04-13T13:35:11+08:00
tags = ["Leetcode", "Algorithms", "Java", "Tree", "Recursion"]
categories = ["leetcode"]
draft = false
+++

# 501.javaä¸­åºéå†å¸¸æ•°ç©ºé—´è¯¦è§£ï¼ˆç´¯æ­»æˆ‘äº†ï¼‰

> [0501. Find Mode in Binary Search Tree](https://leetcode-cn.com/problems/find-mode-in-binary-search-tree/)
> [501.javaä¸­åºéå†å¸¸æ•°ç©ºé—´è¯¦è§£ï¼ˆç´¯æ­»æˆ‘äº†ï¼‰](https://leetcode-cn.com/problems/find-mode-in-binary-search-tree/solution/501javazhong-xu-bian-li-chang-shu-kong-jian-xiang-/) by [ustcyyw](https://leetcode-cn.com/u/ustcyyw/)

**æ›´å¤šLeetCodeé¢˜è§£è¯·çœ‹[é¢˜è§£ä»“åº“](https://github.com/ustcyyw/yyw_algorithm),å¦‚æœè§‰å¾—è¿˜ä¸é”™è¯·åˆ«åå•¬ä½ çš„star~**
### ä¸¤ç§è§£æ³•

##### 1.ä½¿ç”¨Listå³æ—¶å­˜æ”¾å‡ºç°æœ€å¤šçš„æ•°

```java
	private List<Integer> items;
    private int maxCount;
    private int curCount;
    private TreeNode pre;

    public int[] findMode(TreeNode root) {
        if (root == null)
            return new int[0];
        items = new ArrayList<>();
        // è¿™é‡Œè®¾ç½®ä¸º1æ˜¯å› ä¸º åœ¨é€’å½’ä¸­ BSTä¸­æœ€å·¦è¾¹çš„ç»“ç‚¹è¢«è·³è¿‡äº†ï¼Œä½œä¸ºåˆçŠ¶æ€ è¯¥ç»“ç‚¹å€¼å‡ºç°ä¸€æ¬¡ï¼Œè®°å½•çš„å‡ºç°æœ€å¤šæ¬¡æ•°ä¸€å¼€å§‹ä¹Ÿä¸º1
        maxCount = 1;
        curCount = 1;
        midTraversal(root);
        // æœ€å³ç«¯ç»“ç‚¹çš„å¤„ç†ï¼Œä»é€’å½’ä¸­çœ‹ï¼Œæœ€åä¸€ä¸ªç»“ç‚¹ä¸å‰ä¸€ä¸ªç»“ç‚¹ç›¸ç­‰åªæ›´æ–°äº†curCountçš„å€¼ï¼›ä¸ç›¸ç­‰åˆ™åªè€ƒè™‘åˆ°å€’æ•°ç¬¬äºŒä¸ªç»“ç‚¹ã€‚
        if(curCount > maxCount)
            return new int[]{pre.val};
        if(curCount == maxCount)
            items.add(pre.val);
        int[] res = new int[items.size()];
        for (int i = 0; i < res.length; i++)
            res[i] = items.get(i);
        return res;
    }

    private void midTraversal(TreeNode x) {
        if (x == null) return;
        midTraversal(x.left);
        if(pre != null){
            if(x.val != pre.val){ // è¯´æ˜ä¸Šä¸€ä¸ªå€¼çš„ç»“ç‚¹æ•°é‡å·²ç»ç»Ÿè®¡å®Œæˆ è¦çœ‹å‡ºç°æ¬¡æ•°çš„æƒ…å†µ
                if(curCount > maxCount){ // å‡ºç°æ¬¡æ•°æ›´å¤šï¼Œæ¸…ç©ºä¹‹å‰çš„å‡ºç°å°‘çš„æ•°ï¼Œæ›´æ–°æœ€å¤§å‡ºç°æ¬¡æ•°
                    maxCount = curCount;
                    items.clear();
                    items.add(pre.val);
                }
                else if(curCount == maxCount){ // ä¸æ­¢ä¸€ä¸ªä¼—æ•°
                    items.add(pre.val);
                }
                curCount = 1; // å½“å‰å€¼ä¸ä¸Šä¸€ä¸ªç»“ç‚¹å€¼ä¸åŒï¼Œé‡ç½®è®¡æ•°
            }
            else curCount++; // å½“å‰å€¼ä¸ä¸Šä¸€ä¸ªç»“ç‚¹å€¼ç›¸åŒï¼Œå½“å‰å€¼çš„å‡ºç°æ¬¡æ•°å¢åŠ ã€‚
        }
        pre = x;
        midTraversal(x.right);
    }
```

æ€è·¯åˆ†æï¼š

* æ‰¾ä¼—æ•°ï¼Œè¯´æ˜è¦ç»Ÿè®¡å‡ºç°æ¬¡æ•°ï¼Œä¸€èˆ¬ä¼šç›´æ¥æƒ³åˆ°æä¸ªå“ˆå¸Œè¡¨æ¥è®¡æ•°ï¼ˆå°±åƒåé¢çš„æ–¹æ³•äºŒï¼‰ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªæœ‰åºæ•°ç»„ä¸­ç»Ÿè®¡å‡ºç°æ¬¡æ•°ï¼Œä½¿ç”¨åŒæŒ‡é’ˆå°±èƒ½å¾ˆå¥½è§£å†³ï¼Œç±»ä¼¼çš„è¿™é‡Œç»™æˆ‘ä»¬çš„æ ‘ä¸æ˜¯ä¸€èˆ¬çš„æ ‘ï¼Œè€Œæ˜¯BSTï¼Œä¸­åºéå†ç›¸å½“äºéå†æœ‰åºæ•°ç»„ã€‚

* åˆ©ç”¨BSTè¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨å“ˆå¸Œè¡¨æ¥è®¡æ•°ã€‚å¦‚åŒåŒæŒ‡é’ˆçš„åšæ³•ï¼Œè¿™é‡Œä¹Ÿéœ€è¦è®°å½•ä¸Šä¸€ä¸ªç»“ç‚¹`TreeNode pre;`è¿™æ ·æ‰èƒ½çŸ¥é“å½“å‰ç»“ç‚¹å€¼ä¸è°æ¯”è¾ƒï¼›å¦å¤–è¿˜éœ€è¦è®°å½•æŸä¸ªå€¼çš„å‡ºç°æ¬¡æ•°`curCount`ï¼Œä»¥åŠå‡ºç°æ¬¡æ•°çš„æœ€å¤§å€¼`maxCount`ï¼ˆå¦åˆ™ä½ å’‹çŸ¥é“è°å‡ºç°æœ€å¤šæ¬¡ï¼‰ã€‚å¹¶ä¸”è¿™é‡Œéå†è¿‡ç¨‹ä¸­çš„ä¼—æ•°ä¿¡æ¯éœ€è¦è®°å½•ï¼ˆListå­˜æ”¾ä¼—æ•°ï¼‰åŠæ›´æ–°ã€‚

* åœ¨ä¸­åºéå†ä¸­ï¼š

    * å¦‚æœ`pre == null`ï¼Œè¯´æ˜è¿™æ˜¯éå†çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œä¸éœ€è¦å¤„ç†ï¼ˆç¬¬ä¸€ä¸ªç»“ç‚¹çš„åˆæ¡ä»¶åœ¨ä¸»å‡½æ•°ä¸­è®¾å®šï¼‰ã€‚

    * å¦‚æœå½“å‰ç»“ç‚¹å€¼ä¸ä¸Šä¸€ä¸ªç»“ç‚¹å€¼ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°+1ã€‚
    * å¦åˆ™ï¼Œæˆ‘ä»¬å…ˆå»åˆ¤æ–­ï¼Œä¸Šä¸€ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°`curCount`ä¸ä¹‹å‰çš„æœ€å¤§å‡ºç°æ¬¡æ•°`maxCount`è°æ›´å¤§ï¼š
        * å¦‚æœä¸Šä¸€ä¸ªæ•°å­—å‡ºç°æ¬¡æ•°æœ€å¤§ï¼Œéœ€è¦æ›´æ–°ä¼—æ•°ä¿¡æ¯ã€‚é¦–å…ˆæ›´æ–°æœ€å¤§å‡ºç°æ¬¡æ•°`maxCount = curCount;`ã€‚ç„¶åå°†ä¹‹å‰è®°å½•çš„ä¼—æ•°æ¸…ç©ºï¼Œå†å°†ä¸Šä¸€ä¸ªæ•°å­—æ”¾å…¥`items.clear();  items.add(pre.val);`
        * å¦‚æœä¸€ä¸ªæ•°å­—å‡ºç°æ¬¡æ•°ç­‰äºæœ€å¤§å‡ºç°æ¬¡æ•°ï¼Œé‚£ä¹ˆç›®å‰æ¥çœ‹ï¼Œå®ƒä¹Ÿæ˜¯å¯èƒ½çš„ä¼—æ•°ï¼ŒåŠ å…¥åˆ—è¡¨`items.add(pre.val);`
        * å¦åˆ™ï¼Œä¸Šä¸€ä¸ªæ•°å­—ä¸€å®šä¸æ˜¯ä¼—æ•°ï¼Œä¸ç®¡å®ƒï¼Œç»§ç»­ä¿ç•™Listä¸­çš„æ•°å­—ã€‚
        * æœ€åï¼Œé‡ç½®è®¡æ•°`curCount = 1;`ï¼Œè¡¨ç¤ºå½“å‰æ•°å­—å‡ºç°ä¸€æ¬¡äº†ã€‚
    * ç„¶åæ›´æ–°`pre = x;`

* å›åˆ°ä¸»å‡½æ•°ï¼š

    * ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼Œ`root == null`ç›´æ¥è¿”å›`new int[0]`ã€‚
    * ç„¶åä¸Šæ–‡æåˆ°çš„åˆå§‹åŒ–ï¼Œå› ä¸ºæœ€å·¦è¾¹ç»“ç‚¹åœ¨ä¸­åºçš„é€’å½’ä¸­ä¸å¤„ç†ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¦é¦–å…ˆå°†`maxCount = 1`ï¼Œå› ä¸ºæ ‘éç©ºæ€»ä¼šæœ‰æ•°å­—å‡ºç°ä¸€æ¬¡ï¼Œç„¶å`curCount = 1`ï¼Œä»£è¡¨æœ€å·¦è¾¹ç»“ç‚¹è¢«æˆ‘ä»¬åœ¨ä¸»å‡½æ•°è®¡æ•°äº†ã€‚
    * è°ƒç”¨è¾…åŠ©å‡½æ•°åï¼Œè¿˜éœ€è¦å¤„ç†æœ€åä¸€ä¸ªç»“ç‚¹çš„å€¼ï¼Œå› ä¸ºåœ¨é€’å½’ä¸­ä¸ä¼šæœ‰å†ä¸‹ä¸€ä¸ªç»“ç‚¹å€¼ä¸ä¹‹ä¸ç›¸ç­‰ç„¶åæ¥åˆ¤æ–­å®ƒçš„å€¼æ˜¯å¦ä¸ºä¼—æ•°ã€‚
        * æ‰€ä»¥å¦‚æœ`curCount > maxCount`ï¼Œè¯´æ˜æœ€åä¸€ä¸ªç»“ç‚¹æ‰æ˜¯å”¯ä¸€ä¼—æ•°ï¼Œ`return new int[]{pre.val};`
        * å¦‚æœ`curCount == maxCount`ï¼Œè¯´æ˜æœ€åä¸€ä¸ªç»“ç‚¹ä¹Ÿæ˜¯ä¼—æ•°ï¼Œ`items.add(pre.val);`
    * æœ€åï¼Œå°†Listè½¬æˆæ•°ç»„è¿”å›ã€‚

* è¿™ä¸ªé¢˜è¦æ³¨æ„è¾¹ç•Œçš„è€ƒè™‘ï¼

* æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ï¼Œ ä¸è€ƒè™‘é€’å½’è°ƒç”¨æ ˆçš„è¯ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥è®¤ä¸ºæ˜¯å¸¸æ•°ï¼Œä¸­é—´çŠ¶æ€Listçš„å…ƒç´ å¹¶ä¸ä¼šå¾ˆå¤šã€‚

è¿è¡Œç»“æœï¼š

* æ‰§è¡Œç”¨æ—¶ :0 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·
* å†…å­˜æ¶ˆè€— :41.5 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†5.25%çš„ç”¨æˆ·

##### 2.ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å…ƒç´ å‡ºç°æ¬¡æ•°

```java
	private Map<Integer, Integer> map;
    private int count, max;
    public int[] findMode2(TreeNode root) {
        if (root == null)
            return new int[0];
        map = new HashMap<>();
        count =  0;
        max = 0;
        midTraversal2(root);
        int[] res = new int[count];
        for(int key : map.keySet()){
            if(map.get(key) == max)
                res[--count] = key;
        }
        return res;
    }

    private void midTraversal2(TreeNode x){
        if(x == null)
            return;
        midTraversal2(x.left);
        int temp = map.getOrDefault(x.val, 0) + 1;
        map.put(x.val, temp);
        if(temp > max){
            max = temp;
            count = 1;
        } else if(temp == max){
            count++;
        }
        midTraversal2(x.right);
    }
```

æ€è·¯åˆ†æï¼š

* çœ‹å®Œæ–¹æ³•1å†æ¥çœ‹æ–¹æ³•äºŒï¼Œæ˜¾ç„¶ç®€å•äº†å¾ˆå¤šï¼Œå› ä¸ºè¿™é‡Œæ²¡æœ‰ä½¿ç”¨BSTçš„ç‰¹æ€§ï¼Œå¿…ç„¶ä¹Ÿä¼šæ…¢ä¸å°‘ã€‚
* æ€è·¯å°±æ˜¯åˆ©ç”¨å“ˆå¸Œè¡¨è®¡æ•°ï¼Œä¸è¿‡ä¹Ÿåœ¨éå†ä¸­è®¡æ•°äº†ä¼—æ•°çš„ä¸ªæ•°ï¼Œä»¥åŠä¼—æ•°å‡ºç°äº†å‡ æ¬¡ï¼Œè¿™æ ·æ–¹ä¾¿åç»­å¯¹é”®éå†æ—¶æ‰¾åˆ°ä¼—æ•°å’Œå¼€è¾Ÿæ•°ç»„ã€‚

è¿è¡Œç»“æœï¼š

* 5ms 

æ›´å¤šLeetCodeé¢˜è§£è¯·çœ‹æˆ‘çš„[github](https://github.com/ustcyyw/yyw_algorithm)ï¼Œåœ°å€https://github.com/ustcyyw/yyw_algorithmã€‚è¿˜æœ‰åˆ«çš„å°é¡¹ç›®ä¹Ÿå¾ˆå¥½ç©~å‘å¾®æ±‚ä¸ªå°æ˜Ÿæ˜ŸğŸ’–